"use strict";let xhr=null,timeout=0,previous=0,charts=0;function dateLocalizer(){let tz=Intl.DateTimeFormat().resolvedOptions().timeZone;$.ajax({data:{tz:tz},method:"POST",url:"/tz/"});let date,offset=60*-(new Date).getTimezoneOffset(),dates=document.querySelectorAll(".date");Array.prototype.forEach.call(dates,function(date,i){let utc,d=+date.getAttribute("data-utc")+ +offset,dateString=("0"+(d=new Date(1e3*d)).getUTCDate()).slice(-2)+" "+d.toLocaleString("en-us",{month:"short"})+" "+d.getUTCFullYear()+" "+("0"+d.getUTCHours()).slice(-2)+":"+("0"+d.getUTCMinutes()).slice(-2);date.innerText=dateString})}function giveConsent(){_paq.push(["rememberConsentGiven"])}function denyConsent(){_paq.push(["forgetConsentGiven"])}function trackView(url){_paq.push(["requireConsent"]),_paq.push(["trackPageView",url])}function trackSearch(q){_paq.push(["requireConsent"]),_paq.push(["trackSiteSearch",q])}function pushState(url){const urls=["episodes","dopebar","subscriptions","playlist","charts","previous","change-password","autocomplete"];for(let i=0;i<urls.length;i++)if(url.includes(urls[i]))return;titleUpdater();const context=document.getElementById("center-stage").innerHTML,state={context:context,url:url};try{history.pushState(state,"",url)}catch(e){console.log("State is too big to save",context.length,e)}trackView(url)}function replaceState(url){url=url.replace("episodes","showpod");const urls=["dopebar","subscriptions","playlist","charts","previous","change-password","autocomplete"];for(let i=0;i<urls.length;i++)if(url.includes(urls[i]))return;url&&!url.includes("unsubscribe")||(url=document.baseURI),titleUpdater();const context=document.getElementById("center-stage").innerHTML,state={context:context,url:url};try{history.replaceState(state,"",url)}catch(e){console.log("State is too big to save",context.length,e)}}function titleUpdater(){let title="dopepod";const pw=document.getElementById("player-wrapper");if(pw)title=pw.getAttribute("data-title");else{const cs=document.getElementById("center-stage").querySelector(".results");cs&&(title=cs.getAttribute("data-title"))}document.title=title}function getCookie(name){let cookieValue=null;if(document.cookie&&""!==document.cookie){const cookies=document.cookie.split(";");for(let i=0;i<cookies.length;i++){const cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)===name+"="){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}}return cookieValue}function csrfSafeMethod(method){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(method)}function refreshCookie(){const csrftoken=getCookie("csrftoken");$.ajaxSetup({beforeSend:function(xhr,settings){csrfSafeMethod(settings.type)||this.crossDomain||xhr.setRequestHeader("X-CSRFToken",csrftoken)}})}function refreshPage(){getResults(["/dopebar/","dopebar-wrapper",!1],!0),getResults(["/previous/","previous",!1],!0),getResults(["/charts/","charts",!1],!0),getResults(["/subscriptions/","subscriptions",!1],!0),getResults(["/playlist/","playlist",!1],!0)}function checkForXHR(url){if(null!=xhr){const urls=["dopebar","charts","episodes","previous","subscriptions","playlist"];for(let i=0;i<urls.length;i++)if(url.includes(urls[i]))return;xhr.abort(),xhr=null}}function enableLoader(el,url){if("player"==el.id)addClass(el.querySelector("#player-content"),"blurred");else if("episodes-content"==el.id){let blurrables=children(el,":not(.loader)");blurrables&&Array.prototype.forEach.call(blurrables,function(blurrable,i){addClass(blurrable,"blurred")})}else{let blurrables=children(el,":not(.loader)");blurrables&&Array.prototype.forEach.call(blurrables,function(blurrable,i){addClass(blurrable,"blurred")})}const loaders=el.querySelectorAll(".loader");let loader=loaders[loaders.length-1];addClass(loader,"d-block"),url&&loader.querySelector(".reload-button").setAttribute("href",url)}function getResults(args,noLoader,noPush){const url=args[0];let drop=args[1];("string"==typeof drop||drop instanceof String)&&(drop=document.getElementById(drop));const scroll=args[2],callback=args[3],callbackArgs=args[4];if(checkForXHR(url),noPush||pushState(url),!noLoader){const rc=drop.querySelector(".results-collapse");rc&&!hasClass(rc,"show")&&$(rc).collapse("show"),enableLoader(drop,url),scroll&&(url.includes("/charts/")||url.includes("/previous/")||scrollTo(drop))}xhr=$.ajax({type:"GET",url:url}).fail(function(xhr,ajaxOptions,thrownError){url.includes("/episodes/")&&"abort"!=thrownError?(podid=url.split("/")[2],podid&&noshow(podid)):url.includes("previous")?window.clearInterval(previous):url.includes("charts")&&window.clearInterval(charts)}).done(function(response){if(drop.innerHTML=response,lazyload(),callback)callback(callbackArgs);else if("dopebar-wrapper"==drop.id){let response=drop.querySelector("#dopebar");const theme=response.getAttribute("data-theme");response.removeAttribute("data-theme"),themeChanger(theme)}else children(drop,".splash").length?initPlay():"subscriptions"!=drop.id&&"playlist"!=drop.id||$(drop).trigger("sticky_kit:recalc");scroll&&(url.includes("/charts/")||url.includes("/previous/"))&&$(window).width()<992&&scrollTo(drop),replaceState(url)})}function addClass(el,className){el.classList?el.classList.add(className):el.className+=" "+className}function removeClass(el,className){el.classList?el.classList.remove(className):el.className=el.className.replace(new RegExp("(^|\\b)"+className.split(" ").join("|")+"(\\b|$)","gi")," ")}function toggleClass(el,className){if(el.classList)el.classList.toggle(className);else{const classes=el.className.split(" "),existingIndex=classes.indexOf(className);existingIndex>=0?classes.splice(existingIndex,1):classes.push(className),el.className=classes.join(" ")}}function hasClass(el,className){return el.classList?el.classList.contains(className):new RegExp("(^| )"+className+"( |$)","gi").test(el.className)}function parents(node,className){let current=node;for(;null!=current.parentNode;)if((current=current.parentNode).classList.contains(className))return current}function children(node,name){let array=[];const nodes=node.childNodes;return nodes&&Array.prototype.forEach.call(nodes,function(node,i){selectorMatches(node,name)&&array.push(node)}),array}function selectorMatches(element,selector){if("function"==typeof element.matches&&element.matches(selector))return element;if("function"==typeof element.matchesSelector&&element.matchesSelector(selector))return element;const matches=(element.document||element.ownerDocument).querySelectorAll(selector);matches&&Array.prototype.forEach.call(matches,function(match,i){if(match==element)return match})}function noshow(podid){$.ajax({data:{podid:podid},method:"POST",url:"/noshow/"})}function scrollSpy(){scrollUp(),playerUnfixer(),columnFixer(),dopebarBottomShower()}function dopebarBottomShower(){const results=document.querySelectorAll(".results"),dopebarBottomLinks=document.getElementById("dopebar-bottom").querySelectorAll("ul li > :first-child"),dopebarCollapseLinks=document.getElementById("dopebar-collapse").querySelectorAll("ul li > :first-child");Array.prototype.forEach.call(dopebarBottomLinks,function(dopebarBottomLink,j){addClass(dopebarBottomLink,"d-active")}),Array.prototype.forEach.call(dopebarCollapseLinks,function(dopebarCollapseLink,j){removeClass(dopebarCollapseLink,"active")}),Array.prototype.forEach.call(results,function(result,i){result.getBoundingClientRect().top<0&&result.classList.forEach(function(a,b,c){Array.prototype.forEach.call(dopebarBottomLinks,function(dopebarBottomLink,j){dopebarBottomLink.classList.forEach(function(x,y,z){a+"-link"===x&&removeClass(dopebarBottomLink,"d-none")})}),Array.prototype.forEach.call(dopebarCollapseLinks,function(dopebarCollapseLink,j){dopebarCollapseLink.classList.forEach(function(x,y,z){a+"-link"===x&&addClass(dopebarCollapseLink,"d-none")})})})})}function scrollUp(){let scroll=$(window).scrollTop(),button=document.getElementById("scroll-up");scroll>300?addClass(button,"d-inline-block"):removeClass(button,"d-inline-block")}function scrollToTop(){$("html, body").animate({scrollTop:$("body").offset().top},250)}function scrollTo(obj){$("html, body").animate({scrollTop:$(obj).offset().top-44},250)}function scrollText(box,text){const boxWidth=box.innerWidth(),textWidth=text.width();if(textWidth>boxWidth){const animSpeed=30*textWidth;$(box).animate({scrollLeft:textWidth-boxWidth},animSpeed).animate({scrollLeft:0},animSpeed,function(){setTimeout(function(){scrollText(box,text)},1e3)})}}function playerUnfixer(){const x=$("#footer").offset().top,y=$(window).scrollTop()+$(window).height();x>y?addClass(document.getElementById("player"),"fixed-bottom"):removeClass(document.getElementById("player"),"fixed-bottom")}function columnFixer(){$("#subscriptions, #playlist").stick_in_parent({offset_top:44})}function themeChanger(theme){const themes=["light","dark"];for(let i=0;i<themes.length;i++)theme.includes(themes[i])&&(document.body.className="",addClass(document.body,theme))}function postContact(form){const method=form.method,url=form.action,data=$(form).serialize(),drop=document.getElementById("center-stage");$.ajax({data:data,method:method,url:url}).fail(function(xhr,ajaxOptions,thrownError){drop.innerHTML=xhr.responseText,scrollTo(drop)}).done(function(response){drop.innerHTML=response,scrollTo(drop),replaceState(url)}),enableLoader(drop,url)}function postSettings(form){const method=form.method,url=form.action,data=$(form).serialize(),drop=document.getElementById("center-stage"),theme=form.querySelector("input[name=theme]").value;$.ajax({data:data,method:method,url:url}).fail(function(xhr,ajaxOptions,thrownError){drop.innerHTML=xhr.responseText,scrollTo(drop)}).done(function(response){theme&&themeChanger(theme),drop.innerHTML=response,scrollTo(drop),replaceState(url)}),enableLoader(drop,url)}function postLogin(form){const method=form.method,url=form.action,data=$(form).serialize(),drop=document.getElementById("center-stage"),button=form.querySelector("button[type=submit].btn-dope");button&&(button.innerHTML=getButtonLoading()),$.ajax({data:data,method:method,url:url}).fail(function(xhr,ajaxOptions,thrownError){drop.innerHTML=xhr.responseText,scrollTo(drop)}).done(function(response){drop.innerHTML=response,children(drop,".splash").length&&initPlay(),scrollTo(drop),(hasClass(form,"login-form")||hasClass(form,"tryout-form"))&&(refreshCookie(),refreshPage())})}function postSubscriptions(form,origPodid,origButton){let button=origButton,podid=origPodid;if(form&&(button=form.querySelector("button[type=submit]"),podid=form.querySelector("input[name^=podid]").value),podid){const drop=document.getElementById("subscriptions");$.ajax({method:"POST",url:"/subscriptions/",data:{podid:podid}}).fail(function(xhr,ajaxOptions,thrownError){}).done(function(response){drop.innerHTML=response;const el=document.querySelector(".results.showpod");if(el){const current_podid=el.getAttribute("data-podid");if(podid==current_podid){const args=["/episodes/"+podid+"/","episodes-content",!1];getResults(["/showpod/"+podid,"center-stage",!1,getResults,args],!1,!0)}}getResults(["/charts/","charts",!1]),$(drop).trigger("sticky_kit:recalc")}),button.innerHTML=getButtonLoading()}}function postPlaylist(form,origData,origMode,origButton,origPos){let data=origData,mode=origMode,button=origButton,pos=origPos,text=void 0;form&&(data=$(form).serialize(),mode=form.querySelector("input[name=mode]").value,button=form.querySelector("button[type=submit]"),pos=form.querySelector("input[name=pos]")),pos&&!origPos&&(pos=pos.value);const drop=document.getElementById("playlist");button&&(text=button.innerHTML);const url="/playlist/";if("play"==mode){const wrapper=document.getElementById("player-wrapper");if(wrapper){removeClass(wrapper,"minimize");const audio=document.getElementById("audio");audio.preload="none",enableLoader(document.getElementById("player"))}}$.ajax({method:"POST",url:url,data:data}).fail(function(xhr,ajaxOptions,thrownError){button&&(button.innerHTML=text),document.getElementById("player").innerHTML=""}).done(function(response){if("play"==mode){let player=document.getElementById("player");player.innerHTML=response,titleUpdater(),button&&(button.innerHTML=text),setTimeout(function(){const box=$(player).find("h1"),text=$(player).find("h1 span");scrollText(box,text)},1e3),pos&&drop.childNodes.length&&getResults([url,drop,!1])}else button&&"add"==mode&&(button.innerHTML=text),drop.innerHTML=response,lazyload();$(drop).trigger("sticky_kit:recalc")}),button&&(button.innerHTML=getButtonLoading())}function playNext(){const mode="play",pos="1",data={mode:mode,pos:"1"},button=void 0;postPlaylist(void 0,data,mode,void 0,"1")}function closePlayer(){document.getElementById("audio").preload="none",document.getElementById("player").innerHTML="",titleUpdater()}function cleanString(q){return(q=(q=(q=q.replace(/&+/g,"+")).replace(/\s+/g,"+")).replace(/([^a-zA-Z0-9\u0080-\uFFFF +']+)/gi,"")).toLowerCase()}function getButtonLoading(){return document.getElementById("button-loading").outerHTML}function previousUpdater(){previous=setInterval(function(){const drop=document.getElementById("previous");drop.querySelectorAll(".expandable.expanded").length||getResults(["/previous/","previous",!1],!0)},6e4)}function chartsUpdater(){charts=setInterval(function(){const drop=document.getElementById("charts");drop.querySelectorAll(".expandable.expanded").length||getResults(["/charts/","charts",!1],!0)},864e5)}function hasTouch(){return navigator.maxTouchPoints||navigator.msMaxTouchPoints}function hoverDisabler(){hasTouch()?removeClass(document.documentElement,"no-touch"):addClass(document.documentElement,"no-touch")}function initPopular(){const carousel=document.getElementById("popular-carousel"),results=parents(carousel,"results");$("#popular-carousel").slick({autoplay:!0,infinite:!0,lazyload:"ondemand",prevArrow:results.querySelector(".slick-prev"),nextArrow:results.querySelector(".slick-next")}).show().slick("refresh")}function initPlay(){const elements=document.querySelectorAll(".logo");Array.prototype.forEach.call(elements,function(el,i){toggleClass(el,"d-none")});const carousel=document.getElementById("play-carousel");if(carousel){let slides=Array.from(carousel.childNodes);const first=slides.shift();for(let i=slides.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)),temp=slides[i];slides[i]=slides[j],slides[j]=temp}slides.unshift(first);const results=parents(carousel,"results");$("#play-carousel").html(slides).slick({autoplay:!0,fade:!0,initialSlide:1,lazyLoad:"ondemand",prevArrow:results.querySelector(".slick-prev"),nextArrow:results.querySelector(".slick-next")}).show().slick("refresh")}}function removeErrors(){const el=document.getElementById("errors");el&&el.parentNode.removeChild(el)}function lazyload(){const myLazyLoad=new LazyLoad({elements_selector:".lazyload"})}function toggleButtons(elements){Array.prototype.forEach.call(elements,function(el,i){let icons=Array.from(el.childNodes);icons.shift(),Array.prototype.forEach.call(icons,function(icon,i){toggleClass(icon,"d-none")})})}function togglePopular(){const carousel=$("#popular-carousel"),index=carousel.slick("slickCurrentSlide"),cut=16;index>=16?carousel.slick("slickGoTo",0):index<16&&carousel.slick("slickGoTo",16)}function controlAudio(attr,value){const audio=document.getElementById("audio"),currentAttr=audio[attr];let newAttr;"muted"===attr?newAttr=!audio[attr]:"play"===attr?audio.paused&&audio.play():"pause"===attr?audio.paused||audio.pause():newAttr=+currentAttr+ +value,newAttr<0?newAttr=0:"volume"===attr&&newAttr>1&&(newAttr=1),audio[attr]=newAttr}refreshCookie(),dateLocalizer(),hoverDisabler(),_paq.push(["rememberConsentGiven"]),$(document).ready(function(){lazyload(),replaceState(window.location.href),scrollSpy(),initPlay(),initPopular(),previousUpdater(),chartsUpdater()}).scroll(function(){scrollSpy()}).on("keyup focus",".q",function(e){const input=this,form=parents(input,"search-form"),drop=form.querySelector(".autocomplete");clearTimeout(timeout),timeout=setTimeout(function(){let q=input.value;if(q){if(q.length>1){let url;getResults(["/autocomplete/?q="+(q=cleanString(q)),drop,!0],!0,!0)}}else drop.innerHTML=""},250)}).on("submit",".search-form",function(e){e.preventDefault();const form=this;let url=this.action,q=this.querySelector(".q");if(console.log(q),q.value){const querystring=cleanString(q.value),drop=document.getElementById("center-stage");drop.querySelector(".results").getAttribute("data-q")!=querystring?(getResults([url=url+"?q="+querystring,drop,!0]),trackSearch(querystring)):scrollTo(drop),q.value=""}}).on("submit",".subscriptions-form",function(e){e.preventDefault();const form=this;clearTimeout(timeout),timeout=setTimeout(function(){postSubscriptions(form)},250)}).on("click",".unsubscribe-button",function(e){e.preventDefault();const button=this,selecteds=parents(button,"results").querySelectorAll(".selectable.selected"),podids=[];selecteds.length&&(hasClass(button,"exp")||(Array.prototype.forEach.call(selecteds,function(selected,i){podids[i]=selected.getAttribute("data-podid")}),podids.length&&postSubscriptions(void 0,podids,button)))}).on("submit",".playlist-form",function(e){e.preventDefault();const form=this;form.querySelector(".button-loading")||(clearTimeout(timeout),timeout=setTimeout(function(){postPlaylist(form)},250))}).on("submit",".contact-form",function(e){e.preventDefault();const form=this;clearTimeout(timeout),timeout=setTimeout(function(){postContact(form)},250)}).on("submit",".settings-form",function(e){e.preventDefault();const form=this;clearTimeout(timeout),timeout=setTimeout(function(){postSettings(form)},250)}).on("submit",".tryout-form, .login-form, .signup-form, .password-form, .password-reset-form",function(e){e.preventDefault();const form=this;clearTimeout(timeout),timeout=setTimeout(function(){postLogin(form)},250)}).on("submit",".convert-form",function(e){e.preventDefault(),alert("This feature doesn't work yet. Sorry!")}).on("click",".subscriptions-link",function(e){e.preventDefault(),scrollTo(document.getElementById("subscriptions"))}).on("click",".playlist-link",function(e){e.preventDefault(),scrollTo(document.getElementById("playlist"))}).on("click",".charts-link",function(e){e.preventDefault(),scrollTo(document.getElementById("charts"))}).on("click",".previous-link",function(e){e.preventDefault(),scrollTo(document.getElementById("previous"))}).on("click",".popular-link",function(e){e.preventDefault(),scrollTo(document.getElementById("popular"))}).on("click",".reload-button",function(e){e.preventDefault();const button=this,url=this.href;clearTimeout(timeout),timeout=setTimeout(function(){const drop=parents(button,"results").parentNode;if("episodes-content"==drop.id)url=url.replace("showpod","episodes"),getResults([url,drop,!1]);else{const results=drop.querySelector(".results.showpod");if(results){const podid=results.getAttribute("data-podid");if(podid){const args=["/episodes/"+podid+"/","episodes-content",!1];getResults([url,drop,!1,getResults,args])}else getResults([url,drop,!1])}}},250)}).on("click",".options-button",function(e){e.preventDefault();const button=this;clearTimeout(timeout),timeout=setTimeout(function(){const url=button.href.replace("showpod","episodes"),drop=parents(button,"drop");hasClass(parents(button,"results"),"showpod")?getResults([url,"episodes-content",!1]):getResults([url,drop,!1])},250)}).on("click",".showpod-link",function(e){e.preventDefault();const button=this;timeout=setTimeout(function(){const url=button.href,podid=button.getAttribute("data-podid"),drop=document.getElementById("center-stage");if(drop.querySelector(".results").getAttribute("data-podid")!=podid){const args=["/episodes/"+podid+"/","episodes-content",!1];getResults([url,drop,!0,getResults,args])}else scrollTo(drop)},250)}).on("click",".index-link",function(e){e.preventDefault();const button=this;clearTimeout(timeout),timeout=setTimeout(function(){const url=button.href,drop=document.getElementById("center-stage");$(drop).find(".results-collapse").collapse("show"),children(drop,".splash").length?scrollTo(drop):getResults([url,drop,!0])},250)}).on("click",".login-link",function(e){e.preventDefault();const button=this;clearTimeout(timeout),timeout=setTimeout(function(){const url=button.href,drop=document.getElementById("center-stage");$(drop).find(".results-collapse").collapse("show"),children(drop,".login").length?scrollTo(drop):getResults([url,drop,!0])},250)}).on("click",".signup-link",function(e){e.preventDefault();const button=this;clearTimeout(timeout),timeout=setTimeout(function(){const url=button.href,drop=document.getElementById("center-stage");$(drop).find(".results-collapse").collapse("show"),children(drop,".signup").length?scrollTo(drop):getResults([url,drop,!0])},250)}).on("click",".password-link",function(e){e.preventDefault();const button=this;clearTimeout(timeout),timeout=setTimeout(function(){const url=button.href,drop=document.getElementById("center-stage");$(drop).find(".results-collapse").collapse("show"),children(drop,".forgot_password").length?scrollTo(drop):getResults([url,drop,!0])},250)}).on("click",".browse-link",function(e){e.preventDefault();const button=this;clearTimeout(timeout),timeout=setTimeout(function(){const url=button.href,drop=document.getElementById("center-stage");$(drop).find(".results-collapse").collapse("show"),children(drop,".list").length||children(drop,".grid").length?window.location.href.includes("?")?getResults([url,drop,!0]):scrollTo(drop):getResults([url,drop,!0])},250)}).on("click",".settings-link",function(e){e.preventDefault();const button=this;clearTimeout(timeout),timeout=setTimeout(function(){const url=button.href,drop=document.getElementById("center-stage");$(drop).find(".results-collapse").collapse("show"),children(drop,".settings").length?scrollTo(drop):getResults([url,drop,!0])},250)}).on("click",".privacy-link",function(e){e.preventDefault();const button=this;clearTimeout(timeout),timeout=setTimeout(function(){const url=button.href,drop=document.getElementById("center-stage");$(drop).find(".results-collapse").collapse("show"),children(drop,".privacy").length?scrollTo(drop):getResults([url,drop,!0])},250)}).on("click",".terms-link",function(e){e.preventDefault();const button=this;timeout=setTimeout(function(){const url=button.href,drop=document.getElementById("center-stage");$(drop.querySelector(".results-collapse")).collapse("show"),children(drop,".terms").length?scrollTo(drop):getResults([url,drop,!0])},250)}).on("click",".api-link",function(e){e.preventDefault();const button=this;timeout=setTimeout(function(){const url=button.href,drop=document.getElementById("center-stage");$(drop).find(".results-collapse").collapse("show"),children(drop,".api").length?scrollTo(drop):getResults([url,drop,!0])},250)}).on("click",".contact-link",function(e){e.preventDefault();const button=this;timeout=setTimeout(function(){const url=button.href,drop=document.getElementById("center-stage");$(drop).find(".results-collapse").collapse("show"),children(drop,".contact").length?scrollTo(drop):getResults([url,drop,!0])},250)}).on("click",".player-minimize",function(e){e.preventDefault();let button=this;$("#player-collapse").collapse("hide"),$("#confirm-collapse-player").collapse("hide"),"true"==button.getAttribute("aria-expanded")?button.setAttribute("aria-expanded","false"):button.setAttribute("aria-expanded","true"),toggleClass(document.getElementById("player-wrapper"),"minimize")}).on("click",".theme-button[type=submit]",function(){const button=this,theme=button.getAttribute("data-theme");theme&&(button.parentNode.querySelector("input[name=theme]").value=theme)}).on("click",".showpod-button",function(e){const button=this;e.preventDefault(),this.querySelector(".d-none.active")&&(Array.prototype.forEach.call(document.querySelectorAll(".showpod-content"),function(el,i){toggleClass(el,"d-none")}),toggleButtons(document.querySelectorAll(".showpod-button"))),scrollTo(document.querySelector(".showpod-content:not(.d-none)"))}).on("click",".popular-button",function(e){e.preventDefault(),this.querySelector(".d-none.active")&&togglePopular()}).on("click",".view-button",function(e){e.preventDefault();const button=this,view=this.querySelector(".d-none").getAttribute("data-view");let results=parents(this,"results");results.setAttribute("data-view",view),toggleButtons([this]),$(results).find(".view-collapse").collapse("toggle")}).on("click",".select-theme",function(e){e.preventDefault();let theme=document.body.getAttribute("class");"light"==theme?theme="dark":"dark"==theme&&(theme="light"),themeChanger(theme)}).on("click",".expandable .exp",function(e){e.preventDefault();const button=this,expanded=parents(button,"results").querySelector(".expandable.expanded");expanded&&removeClass(expanded,"expanded"),"true"===button.getAttribute("aria-expanded")&&addClass(parents(button,"expandable"),"expanded")}).on("click",".btn-dope, .dope-dot, .search-button",function(){const button=this;addClass(button,"clicked"),setTimeout(function(){removeClass(button,"clicked")},500)}).on("click",".btn-dope, .dope-link, .dope-dot, .episode-header, .search-button",function(){this.blur()}).on("click","a, button:not(.search-button)",function(){let qs=document.querySelectorAll(".q");Array.prototype.forEach.call(qs,function(q,i){q.value=""})}).on("click","body, .dope-link, .search-button, .autocomplete-wrapper > a",function(){$("#dopebar-collapse.show").collapse("hide");const autocompletes=document.querySelectorAll(".autocomplete");Array.prototype.forEach.call(autocompletes,function(autocomplete,i){autocomplete.innerHTML=""})}).on("click","#dopebar-collapse",function(e){e.stopPropagation()}).on("click","#scroll-up",function(){scrollToTop()}).on("click",".select",function(){toggleClass(parents(this,"selectable"),"selected");const container=parents(this,"results"),selectables=container.querySelectorAll(".selectable"),selected=container.querySelectorAll(".selectable.selected");selectables.length==selected.length?addClass(container.querySelector(".select-all"),"active"):removeClass(container.querySelector(".select-all"),"active")}).on("click",".select-all",function(){const button=this,container=parents(this,"results"),selectables=container.querySelectorAll(".selectable");selectables.length&&(hasClass(button,"active")?Array.prototype.forEach.call(selectables,function(selectable,i){removeClass(selectable,"selected")}):Array.prototype.forEach.call(selectables,function(selectable,i){addClass(selectable,"selected")}),toggleClass(button,"active"))}).on("click","#errors .btn-dope",function(){removeErrors()}).on("click",".copy-link",function(){this.querySelector(".link-to-copy").select(),document.execCommand("copy")}).on("show.bs.collapse",".more-collapse",function(e){e.stopPropagation(),$(parents(this,"results")).find(".more-collapse.show").collapse("hide")}).on("shown.bs.collapse hidden.bs.collapse","#subscriptions .collapse, #playlist .collapse",function(e){e.stopPropagation();const drop=parents(this,"drop");setTimeout(function(){$(drop).trigger("sticky_kit:recalc")},500)}).on("show.bs.collapse","#play-carousel .more-collapse",function(e){e.stopPropagation(),$("#play-carousel").slick("slickPause")}).on("hide.bs.collapse","#play-carousel .more-collapse",function(e){e.stopPropagation(),$("#play-carousel").slick("slickPlay")}).on("show.bs.collapse","#splash-collapse",function(){const carousel=document.getElementById("play-carousel");hasClass(carousel,"slick-initialized")&&($(carousel).slick("slickPlay"),$(carousel).slick("slickGoTo",0))}).on("hide.bs.collapse","#splash-collapse",function(){$(this).find(".more-collapse.show").collapse("hide");const carousel=document.getElementById("play-carousel");hasClass(carousel,"slick-initialized")&&$(carousel).slick("slickPause")}).on("beforeChange","#play-carousel",function(e,slick,currentSlide,nextSlide){const expanded=this.querySelector(".expandable.expanded");expanded&&removeClass(expanded,"expanded"),$(this).find(".more-collapse.show").collapse("hide")}).on("beforeChange","#popular-carousel",function(e,slick,currentSlide,nextSlide){const carousel=this,half=this.querySelectorAll(".slick-slide").length-1;if(currentSlide<half){const cut=16;if(currentSlide<cut&&nextSlide>=cut||currentSlide>=cut&&nextSlide<cut){toggleButtons(document.querySelectorAll(".popular-button"));const labels=document.querySelectorAll(".popular .results-bar h1 span");Array.prototype.forEach.call(labels,function(label,i){toggleClass(label,"d-none")})}}else if(cut+=half,currentSlide<cut&&nextSlide>=cut||currentSlide>=cut&&nextSlide<cut){toggleButtons(document.querySelectorAll(".popular-button"));const labels=document.querySelectorAll("popular .results-bar h1 span");Array.prototype.forEach.call(labels,function(icon,i){toggleClass(label,"d-none")})}}).on("show.bs.collapse",".options-collapse",function(e){e.stopPropagation(),$(".options-collapse.show").collapse("hide")}).on("show.bs.collapse",".settings-collapse",function(e){e.stopPropagation(),$(".settings-collapse.show").collapse("hide"),removeErrors()}).on("hidden.bs.collapse",".settings-collapse",function(e){document.querySelector(".settings .dope-options .btn-dope[aria-expanded=true]")||$(".settings-collapse:first").collapse("show")}),$(window).on("popstate",function(e){const state=e.originalEvent.state;if(state){let url=state.url;const urls=["settings"],drop=document.getElementById("center-stage");for(let i=0;i<urls.length;i++)if(url.includes(urls[i]))return getResults([url,drop,!1],!1,!0);if(drop.innerHTML=state.context,hasClass(drop.querySelector(".results"),"splash"))return getResults([url,drop,!1],!1,!0);if(hasClass(drop.querySelector(".results"),"showpod"))return getResults([url=url.replace("showpod","episodes"),"episodes-content",!1]);lazyload(),titleUpdater()}}).on("blur",function(){window.clearInterval(charts),window.clearInterval(previous)}).on("focus",function(){previousUpdater(),chartsUpdater()}).on("resize",function(){hoverDisabler()});