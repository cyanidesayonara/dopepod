"use strict";let xhr=null,timeout=0,previous=0,charts=0;function dateLocalizer(){let tz=Intl.DateTimeFormat().resolvedOptions().timeZone;$.ajax({data:{tz:tz},method:"POST",url:"/tz/"});let date,offset=60*-(new Date).getTimezoneOffset(),dates=document.querySelectorAll(".date");Array.prototype.forEach.call(dates,function(date,i){let utc,d=+date.getAttribute("data-utc")+ +offset,dateString=("0"+(d=new Date(1e3*d)).getUTCDate()).slice(-2)+" "+d.toLocaleString("en-us",{month:"short"})+" "+d.getUTCFullYear()+" "+("0"+d.getUTCHours()).slice(-2)+":"+("0"+d.getUTCMinutes()).slice(-2);date.innerText=dateString})}function trackMe(url){_paq.push(["trackPageView",url])}function pushState(url){const urls=["episodes","dopebar","subscriptions","playlist","charts","previous","change-password"];for(let i=0;i<urls.length;i++)if(url.includes(urls[i]))return;titleUpdater();const context=document.getElementById("center-stage").innerHTML,state={context:context,url:url};history.pushState(state,"",url),trackMe(url)}function replaceState(url){url=url.replace("episodes","showpod");const urls=["dopebar","subscriptions","playlist","charts","previous","change-password"];for(let i=0;i<urls.length;i++)if(url.includes(urls[i]))return;url&&!url.includes("unsubscribe")||(url=document.baseURI),titleUpdater();const context=document.getElementById("center-stage").innerHTML,state={context:context,url:url};history.replaceState(state,"",url)}function titleUpdater(){let title="dopepod";const pw=document.getElementById("player-wrapper");if(pw)title=pw.getAttribute("data-title");else{const cs=document.getElementById("center-stage").querySelector(".results");cs&&(title=cs.getAttribute("data-title"))}document.title=title}function getCookie(name){let cookieValue=null;if(document.cookie&&""!==document.cookie){const cookies=document.cookie.split(";");for(let i=0;i<cookies.length;i++){const cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)===name+"="){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}}return cookieValue}function csrfSafeMethod(method){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(method)}function refreshCookie(){const csrftoken=getCookie("csrftoken");$.ajaxSetup({beforeSend:function(xhr,settings){csrfSafeMethod(settings.type)||this.crossDomain||xhr.setRequestHeader("X-CSRFToken",csrftoken)}})}function refreshPage(){getResults(["/dopebar/","dopebar-wrapper",!1],!0),getResults(["/previous/","previous",!1],!0),getResults(["/charts/","charts",!1],!0),getResults(["/subscriptions/","subscriptions",!1],!0),getResults(["/playlist/","playlist",!1],!0)}function checkForXHR(url){if(null!=xhr){const urls=["dopebar","charts","episodes","previous","subscriptions","playlist"];for(let i=0;i<urls.length;i++)if(url.includes(urls[i]))return;xhr.abort(),xhr=null}}function enableLoader(el,url){if("player"==el.id)addClass(el.getElementById("player-content"),"blurred");else if("episodes-content"==el.id){let blurrables=children(el,":not(.loader)");blurrables&&Array.prototype.forEach.call(blurrables,function(blurrable,i){addClass(blurrable,"blurred")})}else{let blurrables=children(el,":not(.loader)");blurrables&&Array.prototype.forEach.call(blurrables,function(blurrable,i){addClass(blurrable,"blurred")})}const loaders=el.querySelectorAll(".loader");let loader=loaders[loaders.length-1];addClass(loader,"d-block"),loader.querySelector(".reload-button").setAttribute("href",url)}function getResults(args,noLoader,noPush){const url=args[0];let drop=args[1];("string"==typeof drop||drop instanceof String)&&(drop=document.getElementById(drop));const scroll=args[2],callback=args[3],callbackArgs=args[4];if(checkForXHR(url),noPush||pushState(url),!noLoader){const rc=drop.querySelector(".results-collapse");rc&&!hasClass(rc,"show")&&$(rc).collapse("show"),enableLoader(drop,url),scroll&&(url.includes("/charts/")||url.includes("/previous/")||scrollTo(drop))}xhr=$.ajax({type:"GET",url:url}).fail(function(xhr,ajaxOptions,thrownError){url.includes("/episodes/")&&"abort"!=thrownError?(podid=url.split("/")[2],podid&&noshow(podid)):url.includes("previous")?window.clearInterval(previous):url.includes("charts")&&window.clearInterval(charts)}).done(function(response){if(drop.innerHTML=response,lazyload(),callback)callback(callbackArgs);else if("dopebar-wrapper"==drop.id){let response=drop.getElementById("dopebar");const theme=response.getAttribute("data-theme");response.removeAttribute("data-theme"),themeChanger(theme)}scroll&&(url.includes("/charts/")||url.includes("/previous/"))&&$(window).width()<992&&scrollTo(drop),replaceState(url)})}function addClass(el,className){el.classList?el.classList.add(className):el.className+=" "+className}function removeClass(el,className){el.classList?el.classList.remove(className):el.className=el.className.replace(new RegExp("(^|\\b)"+className.split(" ").join("|")+"(\\b|$)","gi")," ")}function toggleClass(el,className){if(el.classList)el.classList.toggle(className);else{const classes=el.className.split(" "),existingIndex=classes.indexOf(className);existingIndex>=0?classes.splice(existingIndex,1):classes.push(className),el.className=classes.join(" ")}}function hasClass(el,className){return el.classList?el.classList.contains(className):new RegExp("(^| )"+className+"( |$)","gi").test(el.className)}function parents(node,className){let current=node;for(;null!=current.parentElement;)if((current=current.parentElement).classList.contains(className))return current}function children(node,className){let array=[];const nodes=node.childNodes;return nodes&&Array.prototype.forEach.call(nodes,function(node,i){selectorMatches(node,className)&&array.push(node)}),array}function selectorMatches(element,selector){if("function"==typeof element.matches&&element.matches(selector))return element;if("function"==typeof element.matchesSelector&&element.matchesSelector(selector))return element;const matches=(element.document||element.ownerDocument).querySelectorAll(selector);matches&&Array.prototype.forEach.call(matches,function(match,i){if(match==element)return match})}function noshow(podid){$.ajax({data:{podid:podid},method:"POST",url:"/noshow/"})}function scrollSpy(){scrollUp(),playerUnfixer(),columnFixer()}function scrollUp(){let scroll=$(window).scrollTop(),button=document.getElementById("scroll-up");scroll>300?addClass(button,"d-inline-block"):removeClass(button,"d-inline-block")}function scrollToTop(){$("html, body").animate({scrollTop:$("body").offset().top},250)}function scrollTo(obj){$("html, body").animate({scrollTop:$(obj).offset().top-44},250)}function scrollText(box,text){const boxWidth=box.innerWidth(),textWidth=text.width();if(textWidth>boxWidth){const animSpeed=30*textWidth;$(box).animate({scrollLeft:textWidth-boxWidth},animSpeed).animate({scrollLeft:0},animSpeed,function(){setTimeout(function(){scrollText(box,text)},1e3)})}}function playerUnfixer(){const x=$("#footer").offset().top,y=$(window).scrollTop()+$(window).height();x>y?addClass(document.getElementById("player"),"fixed-bottom"):removeClass(document.getElementById("player"),"fixed-bottom")}function columnFixer(){$("#subscriptions, #playlist").stick_in_parent({offset_top:44})}function themeChanger(theme){const themes=["light","dark"];for(let i=0;i<themes.length;i++)theme.includes(themes[i])&&(document.body.className="",addClass(document.body,theme))}function postContact(form){const method=form.method,url=form.action,data=$(form).serialize(),drop=document.getElementById("center-stage");$.ajax({data:data,method:method,url:url}).fail(function(xhr,ajaxOptions,thrownError){$(drop).html(xhr.responseText),scrollToTop()}).done(function(response){$(drop).html(response),scrollToTop(),replaceState(url)}),enableLoader(drop,url)}function postSettings(form){const button=form.querySelector("button[type=submit]"),theme=button.getAttribute("data-theme");button.parentNode.querySelector("input[name=theme]").value=theme;const method=form.method,url=form.action,data=$(form).serialize(),drop=document.getElementById("center-stage");$.ajax({data:data,method:method,url:url}).fail(function(xhr,ajaxOptions,thrownError){drop.innerHTML=xhr.responseText,scrollToTop()}).done(function(response){theme&&themeChanger(theme),$(drop).html(response),scrollToTop(),replaceState(url)}),enableLoader(drop,url)}function postLogin(form){const method=form.method,url=form.action,data=$(form).serialize(),drop=document.getElementById("center-stage"),button=form.querySelector("button[type=submit].btn-dope");button.innerHTML=getButtonLoading(),$.ajax({data:data,method:method,url:url}).fail(function(xhr,ajaxOptions,thrownError){drop.html(xhr.responseText),scrollToTop()}).done(function(response){getResults(["/",drop,!0],!1,!0),(form.hasClass("login-form")||form.hasClass("tryout-form"))&&(refreshCookie(),refreshPage())})}function postSubscriptions(form){const button=form.querySelector("button[type=submit]"),podid=form.querySelector("input[name^=podid]").value;if(podid){const drop=document.getElementById("subscriptions");$.ajax({method:"POST",url:"/subscriptions/",data:{podid:podid}}).fail(function(xhr,ajaxOptions,thrownError){}).done(function(response){if(drop.childNodes.length){const div=document.createElement("div");div.innerHTML=response;const rc=div.querySelector(".results-collapse");drop.querySelector(".results-collapse").parentNode.innerHTML=rc}else drop.innerHTML=response;const el=document.querySelector(".results.showpod"),current_podid=el.getAttribute("data-podid");if(podid==current_podid){const args=["/episodes/"+podid+"/","episodes-content",!1];getResults(["/showpod/"+podid,drop,!1,getResults,args],!1,!0)}getResults(["/charts/","charts",!1]),lazyload(),$(drop).trigger("sticky_kit:recalc")}),button.innerHTML=getButtonLoading()}}function postPlaylist(form){const data=$(form).serialize(),mode=form.querySelector("input[name=mode]").value,pos=form.querySelector("input[name=pos]").value,button=form.querySelector("button[type=submit]"),drop=document.getElementById("playlist"),text=button.innerText,url="/playlist/";if("play"==mode){const wrapper=document.getElementById("player-wrapper");if(wrapper){removeClass(wrapper,"minimize");const audio=wrapper.getElementById("audio");audio.preload="none",enableLoader(document.getElementById("player"))}}$.ajax({method:"POST",url:url,data:data}).fail(function(xhr,ajaxOptions,thrownError){button.innerText=text,document.getElementById("player").innerHTML=""}).done(function(response){if("play"==mode){document.getElementById("player").innerHTML=response,titleUpdater();try{button.innerText=text}catch(e){}setTimeout(function(){const box=player.querySelector("h1"),text=player.querySelector("h1 span");scrollText(box,text)},1e3),pos&&drop.childNodes.length&&getResults([url,drop,!1])}else{"add"==mode&&(button.innerText=text);let div=document.createElement("div");div.innerHTML=response;const rc=div.querySelector(".results-collapse");drop.querySelector(".results-collapse").parentNode.innerHTML=rc,lazyload()}drop.trigger("sticky_kit:recalc")}),button.innerHTML=getButtonLoading()}function playNext(){const mode="play",pos="1",data={mode:mode,pos:"1"},button=void 0;postPlaylist(data,mode,void 0,"1")}function closePlayer(){document.getElementById("audio").preload="none",document.getElementById("player").innerHTML="",titleUpdater()}function cleanString(q){return(q=(q=(q=q.replace(/&+/g,"+")).replace(/\s+/g,"+")).replace(/([^a-zA-Z0-9\u0080-\uFFFF +']+)/gi,"")).toLowerCase()}function getButtonLoading(){return document.getElementById("button-loading").outerHTML}function previousUpdater(){previous=setInterval(function(){const drop=document.getElementById("previous");drop.querySelectorAll(".previous .expandable.expanded").length||getResults(["/previous/","previous",!1],!0)},6e4)}function chartsUpdater(){charts=setInterval(function(){const drop=document.getElementById("playlist");drop.querySelectorAll(".previous .expandable.expanded").length||getResults(["/charts/","playlist",!1],!0)},864e5)}function hasTouch(){return navigator.maxTouchPoints||navigator.msMaxTouchPoints}function hoverDisabler(){hasTouch()?removeClass(document.documentElement,"no-touch"):addClass(document.documentElement,"no-touch")}function initPopular(){$("#popular-carousel").slick({autoplay:!0,infinite:!0,lazyload:"ondemand",prevArrow:"<button type='button' class='btn-dope slick-prev' title='Previous'><span><i class='fas fa-angle-left'></i></span></button>",nextArrow:"<button type='button' class='btn-dope slick-next' title='Next'><span><i class='fas fa-angle-right'></i></span></button>"}).show().slick("refresh")}function initPlay(){const elements=document.querySelectorAll(".logo");Array.prototype.forEach.call(elements,function(el,i){toggleClass(el,"d-none")});const carousel=document.getElementById("play-carousel");if(carousel){let slides=Array.from(carousel.childNodes);const first=slides.shift();for(let i=slides.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)),temp=slides[i];slides[i]=slides[j],slides[j]=temp}slides.unshift(first),$("#play-carousel").html(slides).slick({autoplay:!0,fade:!0,initialSlide:1,lazyLoad:"ondemand",prevArrow:"<button type='button' class='btn-dope active slick-prev' title='Previous'><span><i class='fas fa-angle-left'></i></span></button>",nextArrow:"<button type='button' class='btn-dope active slick-next' title='Next'><span><i class='fas fa-angle-right'></i></span></button>"}).show().slick("refresh")}}function removeErrors(){const el=document.getElementById("errors");el&&el.parentNode.removeChild(el)}function lazyload(){const myLazyLoad=new LazyLoad({elements_selector:".lazyload"})}function toggleButtons(elements){Array.prototype.forEach.call(elements,function(el,i){let icons=Array.from(el.childNodes);icons.shift(),Array.prototype.forEach.call(icons,function(icon,i){toggleClass(icon,"d-none")})})}function togglePopular(){const carousel=$("#popular-carousel"),index=carousel.slick("slickCurrentSlide"),cut=16;index>=16?carousel.slick("slickGoTo",0):index<16&&carousel.slick("slickGoTo",16)}refreshCookie(),dateLocalizer(),hoverDisabler(),$(document).ready(function(){lazyload(),replaceState(window.location.href),scrollSpy(),initPlay(),initPopular(),previousUpdater(),chartsUpdater()}).scroll(function(){scrollSpy()}).on("submit",".search-form",function(e){e.preventDefault();const form=this;let url=this.action,q=this.querySelector(".q").value;if(q){q=cleanString(q);const drop=document.getElementById("center-stage");drop.querySelector(".results").getAttribute("data-q")!=q?getResults([url=url+"?q="+q,drop,!0]):scrollTo(drop)}}).on("submit",".subscriptions-form",function(e){e.preventDefault();const form=this;clearTimeout(timeout),timeout=setTimeout(function(){postSubscriptions(form)},250)}).on("click",".unsubscribe-button",function(e){e.preventDefault();const button=this,selected=parents(button,"results-collapse").querySelectorAll(".selectable.selected");if(selected.length){{if(hasClass(button,"exp"))return;const podid=[];Array.prototype.forEach.call(selected,function(el,i){podid[i]=el.getAttribute("data-podid")})}podid&&postSubscriptions(podid,button)}}).on("submit",".playlist-form",function(e){if(e.preventDefault(),!form.querySelector(".button-loading")){const form=this;clearTimeout(timeout),timeout=setTimeout(function(){postPlaylist(form)},250)}}).on("submit",".contact-form",function(e){e.preventDefault();const form=this;clearTimeout(timeout),timeout=setTimeout(function(){postContact(form)},250)}).on("submit",".settings-form",function(e){e.preventDefault();const form=this;clearTimeout(timeout),timeout=setTimeout(function(){postSettings(form)},250)}).on("submit",".tryout-form, .login-form, .signup-form, .password-form, .password-reset-form",function(e){e.preventDefault();const form=this;clearTimeout(timeout),timeout=setTimeout(function(){postLogin(form)},250)}).on("submit",".convert-form",function(e){e.preventDefault(),alert("Oops, this doesn't work yet. Sorry!")}).on("click",".subscriptions-link",function(e){scrollTo(document.getElementById("subscriptions"))}).on("click",".playlist-link",function(e){e.preventDefault(),scrollTo(document.getElementById("playlist"))}).on("click",".charts-link",function(e){e.preventDefault(),scrollTo(document.getElementById("charts"))}).on("click",".previous-link",function(e){e.preventDefault(),scrollTo(document.getElementById("previous"))}).on("click",".reload-button",function(e){e.preventDefault();const button=this,url=this.href;clearTimeout(timeout),timeout=setTimeout(function(){const drop=parents(button,"results").parentNode;if("episodes-content"==drop.id)url=url.replace("showpod","episodes"),getResults([url,drop,!1]);else{const results=drop.querySelector(".results.showpod");if(results){const podid=results.getAttribute("data-podid");if(podid){const args=["/episodes/"+podid+"/","episodes-content",!1];getResults([url,drop,!1,getResults,args])}else getResults([url,drop,!1])}}},250)}).on("click",".options-button",function(e){e.preventDefault();const button=this;clearTimeout(timeout),timeout=setTimeout(function(){const url=button.href.replace("showpod","episodes"),drop=parents(button,"drop");hasClass(parents(button,"results"),"showpod")?getResults([url,"episodes-content",!1]):getResults([url,drop,!1])},250)}).on("click",".showpod-link",function(e){e.preventDefault();const button=this;timeout=setTimeout(function(){const url=button.href,podid=button.getAttribute("data-podid"),drop=document.getElementById("center-stage");if(drop.querySelector(".results").getAttribute("data-podid")!=podid){const args=["/episodes/"+podid+"/","episodes-content",!1];getResults([url,drop,!0,getResults,args])}else scrollTo(drop)},250)}).on("click",".login-link, .signup-link, .password-link, .index-link",function(e){e.preventDefault();const button=this;clearTimeout(timeout),timeout=setTimeout(function(){const url=button.href,drop=document.getElementById("center-stage");$(drop).find(".results-collapse").collapse("show"),children(drop,".splash").length?(hasClass(button,"index-link")||hasClass(button,"collapsed")?$(drop).find("#splash-collapse").collapse("show"):hasClass(button,"login-link")?$(drop).find("#login-collapse").collapse("show"):hasClass(button,"signup-link")?$(drop).find("#signup-collapse").collapse("show"):hasClass(button,"password-link")&&$(drop).find("#password-collapse").collapse("show"),scrollTo(drop)):getResults([url,drop,!0])},250)}).on("click",".browse-link",function(e){e.preventDefault();const button=this;clearTimeout(timeout),timeout=setTimeout(function(){const url=button.href,drop=document.getElementById("center-stage");$(drop).find(".results-collapse").collapse("show"),drop.querySelector(".list, .grid")?window.location.href.includes("?")?getResults([url,drop,!0]):scrollTo(drop):getResults([url,drop,!0])},250)}).on("click",".settings-link",function(e){e.preventDefault();const button=this;clearTimeout(timeout),timeout=setTimeout(function(){const url=button.href,drop=document.getElementById("center-stage");$(drop).find(".results-collapse").collapse("show"),children(drop,".settings").length?scrollTo(drop):getResults([url,drop,!0])},250)}).on("click",".privacy-link",function(e){e.preventDefault();const button=this;clearTimeout(timeout),timeout=setTimeout(function(){const url=button.href,drop=document.getElementById("center-stage");$(drop).find(".results-collapse").collapse("show"),children(drop,".privacy").length?scrollTo(drop):getResults([url,drop,!0])},250)}).on("click",".terms-link",function(e){e.preventDefault();const button=this;timeout=setTimeout(function(){const url=button.href,drop=document.getElementById("center-stage");$(drop.querySelector(".results-collapse")).collapse("show"),children(drop,".terms").length?scrollTo(drop):getResults([url,drop,!0])},250)}).on("click",".api-link",function(e){e.preventDefault();const button=this;timeout=setTimeout(function(){const url=button.href,drop=document.getElementById("center-stage");$(drop).find(".results-collapse").collapse("show"),children(drop,".api").length?scrollTo(drop):getResults([url,drop,!0])},250)}).on("click",".contact-link",function(e){e.preventDefault();const button=this;timeout=setTimeout(function(){const url=button.href,drop=document.getElementById("center-stage");$(drop).find(".results-collapse").collapse("show"),children(drop,".contact").length?scrollTo(drop):getResults([url,drop,!0])},250)}).on("click",".player-minimize",function(e){e.preventDefault();let button=this;$("#player-collapse").collapse("hide"),$("#confirm-collapse-player").collapse("hide"),"true"==button.getAttribute("aria-expanded")?button.setAttribute("aria-expanded","false"):button.setAttribute("aria-expanded","true"),toggleClass(document.getElementById("player-wrapper"),"minimize")}).on("click",".theme-button[type=submit]",function(){const button=this,theme=this.querySelector("span").innerText.toLowerCase();this.parentNode.querySelector("input[name=theme]").value=theme}).on("click",".showpod-button",function(e){const button=this;e.preventDefault(),this.querySelector(".d-none.active")&&(Array.prototype.forEach.call(document.querySelectorAll(".showpod-content"),function(el,i){toggleClass(el,"d-none")}),toggleButtons(document.querySelectorAll(".showpod-button"))),scrollTo(document.querySelector(".showpod-content:not(.d-none)"))}).on("click",".popular-button",function(e){e.preventDefault(),this.querySelector(".d-none.active")&&togglePopular()}).on("click",".view-button",function(e){e.preventDefault();const button=this,view=this.querySelector(".d-none").getAttribute("data-view");let results=parents(this,"results");results.setAttribute("data-view",view),toggleButtons(this),$(results).find(".view-collapse").collapse("toggle")}).on("click",".select-theme",function(e){e.preventDefault();let theme=document.body.getAttribute("class");"light"==theme?theme="dark":"dark"==theme&&(theme="light"),themeChanger(theme)}).on("click",".expandable .exp",function(e){e.preventDefault();const button=this,expanded=parents(button,"results").querySelector(".expandable.expanded");expanded&&removeClass(expanded,"expanded"),"false"===button.getAttribute("aria-expanded")&&addClass(parents(button,"expandable"),"expanded")}).on("click",".btn-dope, .dope-link, .dope-dot, .episode-header, .search-button",function(){this.blur()}).on("click","a, button:not(.search-button)",function(){let qs=document.querySelectorAll(".q");Array.prototype.forEach.call(qs,function(q,i){q.value=""})}).on("click","body, .dope-link, .search-button",function(){$("#dopebar-collapse.show").collapse("hide")}).on("click","#dopebar-collapse",function(e){e.stopPropagation()}).on("click","#scroll-up",function(){scrollToTop()}).on("click",".select",function(){const container=parents(this,"results"),selectables=container.querySelectorAll(".selectable"),selected=container.querySelectorAll(".selectable.selected");Array.prototype.forEach.call(selectables,function(selectable,i){toggleClass(selectable,"selected")}),buttons.length==selected.length?addClass(container.querySelector(".select-all"),"active"):removeClass(container.querySelector(".select-all"),"active")}).on("click",".select-all",function(){const button=this,container=parents(this,"results"),selectables=container.querySelectorAll(".selectable");selectables.length&&(button.hasClass("active")?Array.prototype.forEach.call(selectables,function(selectable,i){removeClass(selectable,"selected")}):Array.prototype.forEach.call(selectables,function(selectable,i){addClass(selectable,"selected")}),button.toggleClass("active"))}).on("click",".errors .btn-dope",function(){removeErrors()}).on("show.bs.collapse",".login-collapse",function(e){e.stopPropagation(),$(children(this.parentNode,".login-collapse.show")).collapse("hide"),removeErrors()}).on("show.bs.collapse",".more-collapse",function(e){e.stopPropagation(),$(parents(this,"results")).find(".more-collapse.show").collapse("hide")}).on("shown.bs.collapse hidden.bs.collapse","#subscriptions .collapse, #playlist .collapse",function(e){e.stopPropagation();const drop=parents(this,"drop");setTimeout(function(){$(drop).trigger("sticky_kit:recalc")},500)}).on("show.bs.collapse","#play-carousel .more-collapse",function(e){e.stopPropagation(),$("#play-carousel").slick("slickPause")}).on("hide.bs.collapse","#play-carousel .more-collapse",function(e){e.stopPropagation(),$("#play-carousel").slick("slickPlay")}).on("show.bs.collapse","#splash-collapse",function(){const carousel=document.getElementById("play-carousel");hasClass(carousel,"slick-initialized")&&($(carousel).slick("slickPlay"),$(carousel).slick("slickGoTo",0))}).on("hide.bs.collapse","#splash-collapse",function(){$(this).find(".more-collapse.show").collapse("hide");const carousel=document.getElementById("play-carousel");hasClass(carousel,"slick-initialized")&&$(carousel).slick("slickPause")}).on("beforeChange","#play-carousel",function(){$(this).find(".dope-result.expanded").removeClass("expanded"),$(this).find(".more-collapse.show").collapse("hide")}).on("beforeChange","#popular-carousel",function(e,slick,currentSlide,nextSlide){const carousel=this,half=this.querySelectorAll(".slick-slide").length-1;if(currentSlide<half){const cut=16;if(currentSlide<cut&&nextSlide>=cut||currentSlide>=cut&&nextSlide<cut){toggleButtons(document.querySelectorAll(".popular-button"));const labels=document.querySelectorAll(".popular .results-bar span");Array.prototype.forEach.call(labels,function(label,i){toggleClass(label,"d-none")})}}else if(cut+=half,currentSlide<cut&&nextSlide>=cut||currentSlide>=cut&&nextSlide<cut){toggleButtons(document.querySelectorAll(".popular-button"));const labels=document.querySelectorAll("popular .results-bar span");Array.prototype.forEach.call(labels,function(icon,i){toggleClass(label,"d-none")})}}).on("show.bs.collapse",".options-collapse",function(e){e.stopPropagation(),$(".options-collapse.show").collapse("hide")}).on("show.bs.collapse",".settings-collapse",function(e){e.stopPropagation(),$(".settings-collapse.show").collapse("hide"),removeErrors()}).on("hidden.bs.collapse",".settings-collapse",function(e){document.querySelector(".settings .dope-options .btn-dope[aria-expanded=true]")||$(".settings-collapse:first").collapse("show")}),$(window).on("popstate",function(e){const state=e.originalEvent.state;if(state){const url=state.url,urls=["settings"],drop=document.getElementById("center-stage");for(let i=0;i<urls.length;i++)if(url.includes(urls[i]))return getResults([url,drop,!1],!1,!0);if(drop.innerHTML=state.context,hasClass(drop.querySelector(".results"),"splash"))return getResults([url,drop,!1],!1,!0),initPlay();if(hasClass(drop.querySelector(".results"),"showpod"))return url=url.replace("showpod","episodes"),getResults([url,"episodes-content",!1]);lazyload(),titleUpdater()}}).on("blur",function(){window.clearInterval(charts),window.clearInterval(previous)}).on("focus",function(){previousUpdater(),chartsUpdater()}).on("resize",function(){hoverDisabler()});