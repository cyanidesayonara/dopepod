{% extends request.is_ajax|yesno:'ajax.html,index/index.html' %}

{% block title %}
dopepod
{% endblock %}

{% block results %}
<div class="col" id="results-wrapper">
  {% include 'optionsbar.html' %}
  <div class="row">
    {% if podcasts %}
      {% for podcast in podcasts %}
        <div class="col-lg-2 col-md-3 col-sm-4 col-6 result-box" id="{{ podcast.itunesid }}" href="{% url 'podinfo' itunesid=podcast.itunesid %}">
          <form id="sub-form" action="{% url 'subscribe' %}"
          id="{{ podcast.itunesid }}" method="POST">
            {% csrf_token %}
            <input type="hidden" name="itunesid" value="{{ podcast.itunesid }}">
            {% if podcast.subscribed %}
            <button type="submit" class="btn btn-outline-primary active sub-button">
            Unsubscribe
            {% else %}
            <button type="submit" class="btn btn-outline-primary sub-button">
            Subscribe
            {% endif %}
            </button>
          </form>
          <a class="show-podinfo" href="{% url 'podinfo' itunesid=podcast.itunesid %}">
            <img class="img-fluid result-image" src="{{ podcast.artworkUrl }}200x200bb.jpg" />
          </a>
          <h6 class="result-title">
            <a class="show-podinfo" href="{% url 'podinfo' itunesid=podcast.itunesid %}" title="{{ podcast.title }}">
              {{ podcast.title }}
            </a>
          </h6>
          <p class="result-artist">
            <span>by </span>
            <a class="show-podinfo" href="{% url 'podinfo' itunesid=podcast.itunesid %}" title="{{ podcast.artist }}">
              {{ podcast.artist }}
            </a>
          </p>
        </div>
      {% endfor %}
    {% else %}
      <div class="col">
        <p>
          No results :p
        </p>
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}
