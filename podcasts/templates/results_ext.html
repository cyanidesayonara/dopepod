{% extends 'index/index.html' %}

{% block results %}
{% for podcast in podcasts %}
<div class="col-lg-2 col-md-3 col-sm-4 result-box">
  <div class="container">
    <div class="row">
      <a class="col result-image show-podinfo" href="{% url 'ajax_podinfo' itunesid=podcast.itunesid %}">
        <img src="{{ podcast.artworkUrl }}156x156bb.jpg" />
        <div class="col">
          <div class="row result-title">
            <h6>{{ podcast.title }}</h6>
          </div>
          <div class="row result-genre">
            <p>{% if podcast.genre.supa %}{{ podcast.genre.supa }} - {% endif %}{{ podcast.genre }}</p>
          </div>
        </div>
      </a>
    </div>
  </div>
</div>
{% endfor %}

<script>
$(function() {
  $('.show-podinfo').click(function(event) {
    event.preventDefault();
    var url = this.href;
    $.ajax({
      type: "GET",
      url: url,
      error: function(xhr, ajaxOptions, thrownError){alert(thrownError);},
      success: function(response) {
        $("#results").html(response);
      }
    });
  });
});
</script>
{% endblock %}