{% extends results.extend|yesno:'base.min.html,ajax.min.html' %}

{% block title %}
dopepod
{% endblock %}

{% block center-stage %}
<div class="col-12 results color-2-trans {{ results.view }}">
  <div class="row results-bar">
    <div class="col-12 results-header" data-q="{{ results.selected_q }}">
      {% if results.extra_options %}
        <button class="btn-dope results-back" onclick="window.history.back()">
          <i class="fas fa-arrow-left" title="Back"></i>
        </button>
        <div class="extra-options">
          <a class="btn-dope results-minimize reverse-toggle" data-toggle="collapse" href="#results-collapse-{{ results.view }}" aria-expanded="true" aria-controls="results-collapse">
            <i class="fas fa-minus" title="Minimize"></i>
          </a>
          <a class="btn-dope results-close" href="/">
            <i class="fas fa-times" title="Close"></i>
          </a>
        </div>
      {% endif %}
      <h1>
        <strong>
          {{ results.header }}
        </strong>
      </h1>
    </div>
  </div>
  <div class="row collapse results-collapse fade show" id="results-collapse-{{ results.view }}">
    {% if results.pages %}
      {% include 'pagination.min.html' %}
    {% endif %}
    <div class="col results-buttons">
      {% if results.view == 'grid' or results.view == 'list' %}
        {% if results.view == 'grid' %}
          <a class="btn-dope view-button active" href="{{ results.view_url }}">
            <span>
              <i class="fas fa-th" title="Toggle View"></i>
            </span>
            <span class="d-none">
              <i class="fas fa-bars" title="Toggle View"></i>
            </span>
          </a>
        {% elif results.view == 'list' %}
          <a class="btn-dope view-button active" href="{{ results.view_url }}">
            <span class="d-none">
              <i class="fas fa-th" title="Toggle View"></i>
            </span>
            <span>
              <i class="fas fa-bars" title="Toggle View"></i>
            </span>
          </a>
        {% endif %}
      {% endif %}
      {% if results.alphabet %}
        {% if results.alphabet_nix_url %}
          <a class="btn-dope active toggle" data-toggle="collapse" href="#alphabet-collapse-{{ results.view }}" aria-expanded="false" aria-controls="alphabet-collapse">
            {{ results.selected_q|capfirst }}
          </a>
        {% else %}
          <a class="btn-dope toggle" data-toggle="collapse" href="#alphabet-collapse-{{ results.view }}" aria-expanded="false" aria-controls="alphabet-collapse">
            A-Z
          </a>
        {% endif %}
      {% endif %}
      {% if results.genres %}
        {% if results.selected_genre %}
          <a class="btn-dope active toggle" data-toggle="collapse" href="#genre-collapse-{{ results.view }}" aria-expanded="false" aria-controls="genre-collapse">
            {{ results.selected_genre }}
          </a>
        {% else %}
          <a class="btn-dope toggle" data-toggle="collapse" href="#genre-collapse-{{ results.view }}" aria-expanded="false" aria-controls="genre-collapse">
            All Genres
          </a>
        {% endif %}
      {% endif %}
      {% if results.languages %}
        {% if results.selected_language %}
          <a class="btn-dope active toggle" data-toggle="collapse" href="#language-collapse-{{ results.view }}" aria-expanded="false" aria-controls="language-collapse">
            {{ results.selected_language }}
          </a>
        {% else %}
          <a class="btn-dope toggle" data-toggle="collapse" href="#language-collapse-{{ results.view }}" aria-expanded="false" aria-controls="language-collapse">
            All Languages
          </a>
        {% endif %}
      {% endif %}
      {% if results.selected_provider == 'dopepod' %}
        <a class="btn-dope options-button active provider-button" href="{{ results.provider_url }}">
          <span>On dopepod</span>
          <span class="d-none">On itunes</span>
        </a>
      {% elif results.selected_provider == 'itunes' %}
        <a class="btn-dope options-button active provider-button" href="{{ results.provider_url }}">
          <span class="d-none">On dopepod</span>
          <span>On itunes</span>
        </a>
      {% endif %}
      {% if results.subscriptions %}
        <a class="btn-dope select-all-button" href="#">
          Select All
        </a>
        <a class="btn-dope unsubscribe-button" href="{% url 'unsubscribe' %}">
          Unsubscribe
        </a>
      {% endif %}
    </div>
    {% if results.alphabet %}
      <div class="collapse fade options-collapse" id="alphabet-collapse-{{ results.view }}">
        <div class="options-buttons">
          {% if results.alphabet_nix_url %}
            <a class="btn-dope options-button nix-button" href="{{ results.alphabet_nix_url }}" id="alphabet-nix">
              <i class="fas fa-times" title="Undo Selection"></i>
            </a>
          {% endif %}
          {% for alphabet in results.alphabet %}
            {% if alphabet.1 %}
              <a class="btn-dope options-button" href="{{ alphabet.1 }}">
                {{ alphabet.0 }}
              </a>
            {% else %}
              <button class="btn-dope active">
                {{ alphabet.0 }}
              </button>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    {% endif %}
    {% if results.genres %}
      <div class="collapse fade options-collapse" id="genre-collapse-{{ results.view }}">
        <div class="options-buttons">
          {% if results.genre_nix_url %}
            <a class="btn-dope options-button nix-button" href="{{ results.genre_nix_url }}">
              <i class="fas fa-times" title="Undo Selection"></i>
            </a>
          {% endif %}
          {% for genre in results.genres %}
            {% if genre.1 %}
              <a class="btn-dope options-button" href="{{ genre.1 }}">
                {{ genre.0 }}
              </a>
            {% else %}
              <button class="btn-dope active">
                {{ genre.0 }}
              </button>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    {% endif %}
    {% if results.languages %}
      <div class="collapse fade options-collapse" id="language-collapse-{{ results.view }}">
        <div class="options-buttons">
          {% if results.language_nix_url %}
            <a class="btn-dope options-button nix-button" href="{{ results.language_nix_url }}">
              <i class="fas fa-times" title="Undo Selection"></i>
            </a>
          {% endif %}
          {% for language in results.languages %}
            {% if language.1 %}
              <a class="btn-dope options-button" href="{{ language.1 }}">
                {{ language.0 }}
              </a>
            {% else %}
              <button class="btn-dope active">
                {{ language.0 }}
              </button>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    {% endif %}

    {% if results.podcasts or results.episodes %}
      <div class="col-12 results-content">
        {% if results.view == 'grid' or results.view == 'list' %}
          {% include 'search.min.html' %}
        {% elif results.view == 'charts' %}
          {% include 'charts.min.html' %}
        {% elif results.view == 'subscriptions'%}
          {% include 'subscriptions.min.html' %}
        {% elif results.view == 'playlist'%}
          {% include 'episodes.min.html' %}
        {% elif results.view == 'last-played'%}
          {% include 'last_played.min.html' %}
        {% endif %}
      </div>
    {% endif %}

    {% if results.pages %}
      {% include 'pagination.min.html' %}
    {% endif %}
  </div>
</div>
{% endblock %}
