<div class="col results">
  <div class="row results-bar">
    <div class="col results-header">
      <span>
        {{ results.header }}
      </span>
    </div>
    <div class="col-auto results-options">
      {% if results.genres %}
        {% if results.selected_genre %}
          <a class="btn btn-dope btn-dope-tab active toggle" data-toggle="collapse" href="#genre-collapse-{{ results.drop }}" aria-expanded="false" aria-controls="genre-collapse-{{ results.drop }}">
            Genre
          </a>
        {% else %}
          <a class="btn btn-dope btn-dope-tab toggle" data-toggle="collapse" href="#genre-collapse-{{ results.drop }}" aria-expanded="false" aria-controls="genre-collapse-{{ results.drop }}">
            Genre
          </a>
        {% endif %}
      {% endif %}
      {% if results.languages %}
        {% if results.selected_language %}
          <a class="btn btn-dope btn-dope-tab active toggle" data-toggle="collapse" href="#language-collapse-{{ results.drop }}" aria-expanded="false" aria-controls="language-collapse-{{ results.drop }}">
            Language
          </a>
        {% else %}
          <a class="btn btn-dope btn-dope-tab toggle" data-toggle="collapse" href="#language-collapse-{{ results.drop }}" aria-expanded="false" aria-controls="language-collapse-{{ results.drop }}">
            Language
          </a>
        {% endif %}
      {% endif %}
      {% if results.view == 'grid' %}
        <a class="btn btn-dope btn-dope-tab" id="view-button" href="{{ results.urls.full_url }}&view=list">
          <div class="view-icon d-none" id="view-icon-grid">
            {% if request.is_ajax %}
              <i class="fas fa-th"></i>
            {% else %}
              Grid
            {% endif %}
          </div>
          <div class="view-icon" id="view-icon-list">
            {% if request.is_ajax %}
              <i class="fas fa-bars"></i>
            {% else %}
              List
            {% endif %}
          </div>
        </a>
      {% elif results.view == 'list' %}
        <a class="btn btn-dope btn-dope-tab" id="view-button" href="{{ results.urls.full_url }}&view=grid">
          <div class="view-icon" id="view-icon-grid">
            {% if request.is_ajax %}
              <i class="fas fa-th"></i>
            {% else %}
              Grid
            {% endif %}
          </div>
          <div class="view-icon d-none" id="view-icon-list">
            {% if request.is_ajax %}
              <i class="fas fa-bars"></i>
            {% else %}
              List
            {% endif %}
          </div>
        </a>
      {% endif %}
      {% if results.extra_options %}
        <a class="btn btn-dope btn-dope-tab reverse-toggle results-minimize" data-toggle="collapse" href="#results-collapse-{{ results.drop }}" aria-expanded="true" aria-controls="results-collapse-{{ results.drop }}" aria-label="Minimize">
          <i class="fas fa-minus-circle icon"></i>
        </a>
        <a class="btn btn-dope btn-dope-tab results-close" href="#" aria-label="Close">
          <i class="fas fa-times-circle icon"></i>
        </a>
      {% endif %}
    </div>
  </div>
  <div class="row options-select selected-buttons">
    {% if results.selected_q %}
      <div class="col selected-group">
        {% if results.selected_q %}
          <a class="btn btn-dope selected-button active" href="{{ results.urls.q_url }}">
            <span class="selected-q">
              {{ results.selected_q }}
            </span>
            <i class="fas fa-times-circle icon selected"></i>
          </a>
        {% endif %}
      </div>
    {% endif %}
    {% if results.selected_genre or results.selected_language %}
      <div class="col options-group">
        {% if results.selected_genre %}
          <a class="btn btn-dope selected-button active" href="{{ results.urls.genre_url }}">
            {{ results.selected_genre }}
            <i class="fas fa-times-circle icon selected"></i>
          </a>
        {% endif %}
        {% if results.selected_language %}
          <a class="btn btn-dope selected-button active" href="{{ results.urls.language_url }}">
            {{ results.selected_language }}
            <i class="fas fa-times-circle icon selected"></i>
          </a>
        {% endif %}
      </div>
    {% endif %}
    {% if results.genres %}
      <div class="collapse options-collapse" id="genre-collapse-{{ results.drop }}">
        <div class="options-group genre-buttons">
          {% if results.selected_genre %}
            <a class="btn btn-dope options-button" href="{{ results.urls.genre_url }}">
              All
            </a>
          {% endif %}
          {% for genre in results.genres %}
            {% if not results.selected_genre == genre %}
              <a class="btn btn-dope options-button" href="{{ results.urls.genre_url }}&genre={{ genre.url_format }}">
                {{ genre }}
              </a>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    {% endif %}
    {% if results.languages %}
      <div class="collapse options-collapse" id="language-collapse-{{ results.drop }}">
        <div class="options-group language-buttons">
          {% if results.selected_language %}
            <a class="btn btn-dope options-button" href="{{ results.urls.language_url }}">
              All
            </a>
          {% endif %}
          {% for language in results.languages %}
            {% if not results.selected_language == language %}
              <a class="btn btn-dope options-button" href="{{ results.urls.language_url }}&language={{ language.url_format }}">
                {{ language }}
              </a>
            {% endif %}
          {% endfor %}
        </div>
      </div>
      {% endif %}
    </div>
  {% if results.podcasts or results.episodes %}
    <div class="row collapse show results-wrapper" id="results-collapse-{{ results.drop }}">
      <div class="col">
        {% if results.podcasts.has_other_pages %}
          {% include 'pagination.html' %}
        {% endif %}

        {% if results.view == 'grid' or results.view == 'list' %}
          {% include 'search.html' %}
        {% elif results.view == 'charts' %}
          {% include 'charts.html' %}
        {% elif results.view == 'episodes' %}
          {% include 'episodes.html' %}
        {% elif results.view == 'subscriptions'%}
          {% include 'subscriptions.html' %}
        {% endif %}

        {% if results.podcasts.has_other_pages %}
          {% include 'pagination.html' %}
        {% endif %}
      </div>
    </div>
  {% endif %}
</div>
